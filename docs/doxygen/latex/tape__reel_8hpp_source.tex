\doxysection{tape\+\_\+reel.\+hpp}
\hypertarget{tape__reel_8hpp_source}{}\label{tape__reel_8hpp_source}\index{src/interface/tape\_reel.hpp@{src/interface/tape\_reel.hpp}}
\doxymbox{\hyperlink{tape__reel_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ TAPE\_REEL\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ TAPE\_REEL\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{audio__module_8hpp}{audio\_module.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__track__node_8hpp}{../engine/flux\_track\_node.hpp}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__audio__utils_8hpp}{../utilities/flux\_audio\_utils.hpp}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\doxymbox{\hyperlink{namespace_beam}{Beam}}\ \{}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_tape_reel_a5d72930147553615cde3a6357ad77f37}{TapeReel}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_audio_module_a409c75189798146d7f556b1d50f4ba98}{AudioModule}}\ \{}
\DoxyCodeLine{00011\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00012\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_a5d72930147553615cde3a6357ad77f37}{TapeReel}}(std::shared\_ptr<FluxTrackNode>\ track,\ \textcolor{keywordtype}{size\_t}\ nodeId,\ \textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y)\ }
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ :\ \doxymbox{\hyperlink{class_beam_1_1_audio_module_a409c75189798146d7f556b1d50f4ba98}{AudioModule}}(track,\ nodeId,\ x,\ y),\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ab1b3f8dc62427ee16843f9c65fb687da}{m\_trackNode}}(track)\ \{}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_audio_module_a75c0758091a1cec0871134babb541135}{setBounds}}(x,\ y,\ 200,\ 120);}
\DoxyCodeLine{00015\ \ \ \ \ \}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_a92ce3fb77345df4a6a2a0aebf04d8bd8}{update}}(\textcolor{keywordtype}{float}\ dt)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ track\ =\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ab1b3f8dc62427ee16843f9c65fb687da}{m\_trackNode}}-\/>getInternalNode();}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (track-\/>getState()\ ==\ \doxymbox{\hyperlink{namespace_beam_aaab526c0becfd931c9f29361daaf7e9fac9dbb2b7c84159b632d71e512eba8428}{TrackState::Playing}})\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_a9a6d8ed12ec3daa3d6470f74064a2fc5}{m\_rotation}}\ +=\ 2.0f\ *\ dt;\ }
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00022\ \ \ \ \ \}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_a3c7a82b43aed2a8f48528bf64c2cde8e}{render}}(\doxymbox{\hyperlink{class_beam_1_1_quad_batcher}{QuadBatcher}}\&\ batcher,\ \textcolor{keywordtype}{float}\ dt,\ \textcolor{keywordtype}{float}\ screenW,\ \textcolor{keywordtype}{float}\ screenH)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a16d867a50f08e83bc2b2242ea7c00acb}{drawRoundedRect}}(\doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.x,\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.y,\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.w,\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.h,\ 12.0f,\ 1.0f,\ 0.22f,\ 0.22f,\ 0.23f,\ 1.0f);}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ track\ =\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ab1b3f8dc62427ee16843f9c65fb687da}{m\_trackNode}}-\/>getInternalNode();}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ reelSize\ =\ 65.0f;}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ reelY\ =\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.y\ +\ 35;}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ drawReel\ =\ [\&](\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a16d867a50f08e83bc2b2242ea7c00acb}{drawRoundedRect}}(x,\ y,\ reelSize,\ reelSize,\ reelSize\ *\ 0.5f,\ 1.0f,\ 0.6f,\ 0.61f,\ 0.63f,\ 1.0f);}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 3;\ ++i)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ angle\ =\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_a9a6d8ed12ec3daa3d6470f74064a2fc5}{m\_rotation}}\ +\ (i\ *\ 2.094f);}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ sx\ =\ x\ +\ reelSize\ *\ 0.5f\ +\ std::sin(angle)\ *\ reelSize\ *\ 0.35f;}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ sy\ =\ y\ +\ reelSize\ *\ 0.5f\ -\/\ std::cos(angle)\ *\ reelSize\ *\ 0.35f;}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a16d867a50f08e83bc2b2242ea7c00acb}{drawRoundedRect}}(sx\ -\/\ 4,\ sy\ -\/\ 4,\ 8,\ 8,\ 4.0f,\ 0.5f,\ 0.1f,\ 0.1f,\ 0.1f,\ 1.0f);}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a16d867a50f08e83bc2b2242ea7c00acb}{drawRoundedRect}}(x\ +\ reelSize\ *\ 0.5f\ -\/\ 5,\ y\ +\ reelSize\ *\ 0.5f\ -\/\ 5,\ 10,\ 10,\ 5.0f,\ 0.5f,\ 0.15f,\ 0.15f,\ 0.16f,\ 1.0f);}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ drawReel(\doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.x\ +\ 20,\ reelY);}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ drawReel(\doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.x\ +\ 115,\ reelY);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_audio_utils_a47dc61c21cf5d067b8c584a35d360aa9}{AudioUtils::drawScrollingText}}(batcher,\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ab1b3f8dc62427ee16843f9c65fb687da}{m\_trackNode}}-\/>getName(),\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.x\ +\ 15,\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.y\ +\ 10,\ 150,\ 15,\ 12,\ dt,\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_a095f4ba7d1f97b8e89619f6b4bd6e38c}{m\_scrollTimer}},\ screenH);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Record\ Button\ UI}}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_rect}{Rect}}\ recBounds\ =\ \{\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.x\ +\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.w\ -\/\ 30,\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.y\ +\ 8,\ 20,\ 20\ \};}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (track-\/>getState()\ ==\ \doxymbox{\hyperlink{namespace_beam_aaab526c0becfd931c9f29361daaf7e9fac5564d2e8b8e0ae08bf4363f2b947166}{TrackState::Recording}})\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a16d867a50f08e83bc2b2242ea7c00acb}{drawRoundedRect}}(recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a94d1d7f7501ecc84f202b7c4bfd61e08}{x}},\ recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}},\ recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a69b99db01aa296ad7964be8fc0365a10}{w}},\ recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a17a83604e8b45e52f9fdbcf4289f9851}{h}},\ 10.0f,\ 2.0f,\ 1.0f,\ 0.1f,\ 0.1f,\ 1.0f);\ \textcolor{comment}{//\ Glowing\ red}}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a54b57a1fa94c48b9778c2fe1109e761a}{drawText}}(\textcolor{stringliteral}{"{}REC"{}},\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.x\ +\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.w\ -\/\ 55,\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.y\ +\ 12,\ 10,\ 1.0f,\ 0.2f,\ 0.2f,\ 1.0f);}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a16d867a50f08e83bc2b2242ea7c00acb}{drawRoundedRect}}(recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a94d1d7f7501ecc84f202b7c4bfd61e08}{x}},\ recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}},\ recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a69b99db01aa296ad7964be8fc0365a10}{w}},\ recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a17a83604e8b45e52f9fdbcf4289f9851}{h}},\ 10.0f,\ 0.5f,\ 0.3f,\ 0.05f,\ 0.05f,\ 1.0f);\ \textcolor{comment}{//\ Dim\ red}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Parent's\ ports}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_audio_module_a0d0da8bdbfb3a2355994bba086e0e721}{getInputPort}}())\ \doxymbox{\hyperlink{class_beam_1_1_audio_module_a0d0da8bdbfb3a2355994bba086e0e721}{getInputPort}}()-\/>render(batcher,\ dt,\ screenW,\ screenH);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_audio_module_a75e91aa2e7da1c9a6d31f4c90915403a}{getOutputPort}}())\ \doxymbox{\hyperlink{class_beam_1_1_audio_module_a75e91aa2e7da1c9a6d31f4c90915403a}{getOutputPort}}()-\/>render(batcher,\ dt,\ screenW,\ screenH);}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ad2fe7a4986075d4a3c6047f2e745460e}{onMouseDown}}(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y,\ \textcolor{keywordtype}{int}\ button)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_audio_module_adddaa58e40512d782c2d902917491499}{AudioModule::onMouseDown}}(x,\ y,\ button))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ track\ =\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ab1b3f8dc62427ee16843f9c65fb687da}{m\_trackNode}}-\/>getInternalNode();}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Record\ Button\ check}}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_rect}{Rect}}\ recBounds\ =\ \{\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.x\ +\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.w\ -\/\ 30,\ \doxymbox{\hyperlink{class_beam_1_1_component_a4f1ec4a5fb168c39a6c18f958b2b1495}{m\_bounds}}.y\ +\ 8,\ 20,\ 20\ \};}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (recBounds.\doxymbox{\hyperlink{struct_beam_1_1_rect_a4b5a429163e8d87425b54e12ff6a1a80}{contains}}(x,\ y))\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (track-\/>getState()\ ==\ \doxymbox{\hyperlink{namespace_beam_aaab526c0becfd931c9f29361daaf7e9fac5564d2e8b8e0ae08bf4363f2b947166}{TrackState::Recording}})\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ab1b3f8dc62427ee16843f9c65fb687da}{m\_trackNode}}-\/>stopRecording();}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ path\ =\ \textcolor{stringliteral}{"{}recording\_"{}}\ +\ std::to\_string(\doxymbox{\hyperlink{class_beam_1_1_audio_module_a7fc32b3bfadec2badbfd067d2f37da96}{getNodeId}}())\ +\ \textcolor{stringliteral}{"{}.wav"{}};}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ab1b3f8dc62427ee16843f9c65fb687da}{m\_trackNode}}-\/>startRecording(path,\ 44100);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00077\ \ \ \ \ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00080\ \ \ \ \ std::shared\_ptr<FluxTrackNode>\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_ab1b3f8dc62427ee16843f9c65fb687da}{m\_trackNode}};}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_a9a6d8ed12ec3daa3d6470f74064a2fc5}{m\_rotation}}\ =\ 0.0f;}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_tape_reel_a095f4ba7d1f97b8e89619f6b4bd6e38c}{m\_scrollTimer}}\ =\ 0.0f;}
\DoxyCodeLine{00083\ \};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \}\ \textcolor{comment}{//\ namespace\ Beam}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ TAPE\_REEL\_HPP}}
\DoxyCodeLine{00088\ }

\end{DoxyCode}
