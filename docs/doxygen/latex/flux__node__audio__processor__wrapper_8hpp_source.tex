\doxysection{flux\+\_\+node\+\_\+audio\+\_\+processor\+\_\+wrapper.\+hpp}
\hypertarget{flux__node__audio__processor__wrapper_8hpp_source}{}\label{flux__node__audio__processor__wrapper_8hpp_source}\index{src/engine/flux\_node\_audio\_processor\_wrapper.hpp@{src/engine/flux\_node\_audio\_processor\_wrapper.hpp}}
\doxymbox{\hyperlink{flux__node__audio__processor__wrapper_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ FLUX\_NODE\_AUDIO\_PROCESSOR\_WRAPPER\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ FLUX\_NODE\_AUDIO\_PROCESSOR\_WRAPPER\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__node_8hpp}{flux\_node.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{audio__processor_8hpp}{../engine/audio\_processor.hpp}}"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{namespace\ }\doxymbox{\hyperlink{namespace_beam}{Beam}}\ \{}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_ab76d80d3acccaf5adb860dd57af02292}{FluxNodeAudioProcessorWrapper}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_audio_processor_a8f0f6af900e612f1e95407eb6c8878cd}{AudioProcessor}}\ \{}
\DoxyCodeLine{00014\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00015\ \ \ \ \ \textcolor{keyword}{explicit}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_ab76d80d3acccaf5adb860dd57af02292}{FluxNodeAudioProcessorWrapper}}(std::shared\_ptr<FluxNode>\ node)\ }
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ :\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a5733b304d9589c0bf2a6a61b42775572}{m\_fluxNode}}(node)\ \{}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Copy\ parameters\ from\ the\ FluxNode\ to\ the\ AudioProcessor}}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ params\ =\ node-\/>getParameters();}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ pair\ :\ params)\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_audio_processor_a7e9f840858284252d4a288f4e89e0c8e}{addParameter}}(pair.second);}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00022\ \ \ \ \ \}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{comment}{//\ Implement\ AudioProcessor\ interface}}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a26b885175501fb2cad51c69ef85489c1}{prepareToPlay}}(\textcolor{keywordtype}{double}\ sampleRate,\ \textcolor{keywordtype}{int}\ samplesPerBlock)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Forward\ to\ the\ wrapped\ node\ if\ it\ has\ a\ prepare\ method}}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ now,\ we'll\ just\ store\ the\ values}}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_audio_processor_add21a9644aaa71b9457b4f508e1e0840}{m\_sampleRate}}\ =\ sampleRate;}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_audio_processor_a3d2ab6b1f0c86689d55c8e72ce428466}{m\_blockSize}}\ =\ samplesPerBlock;}
\DoxyCodeLine{00030\ \ \ \ \ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a124968314929cbbf897db8a23ef5ed3b}{releaseResources}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Forward\ to\ the\ wrapped\ node\ if\ needed}}
\DoxyCodeLine{00034\ \ \ \ \ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_ad4916adf7b3423d1407a4058e43d3a8f}{processBlock}}(\textcolor{keywordtype}{float}**\ audioInputOutput,\ \textcolor{keywordtype}{int}\ numInputChannels,\ \textcolor{keywordtype}{int}\ numOutputChannels,\ \textcolor{keywordtype}{int}\ numSamples,\ \textcolor{keyword}{const}\ \doxymbox{\hyperlink{class_beam_1_1_m_i_d_i_buffer}{MIDIBuffer}}\&\ midiMessages)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ tricky\ -\/\ FluxNode\ expects\ its\ own\ buffer\ format}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ now,\ we'll\ just\ call\ the\ process\ method\ on\ the\ node\ directly}}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ assumes\ the\ node's\ buffers\ are\ already\ set\ up\ correctly}}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Call\ the\ node's\ process\ method}}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a5733b304d9589c0bf2a6a61b42775572}{m\_fluxNode}}-\/>process(numSamples);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ node\ has\ MIDI\ processing,\ call\ it}}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a5733b304d9589c0bf2a6a61b42775572}{m\_fluxNode}}-\/>processMIDI(midiMessages);}
\DoxyCodeLine{00046\ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ std::string\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_aa2b20d72dcf9a64018cfa617ee29df8c}{getName}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a5733b304d9589c0bf2a6a61b42775572}{m\_fluxNode}}-\/>getName();}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{int}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_af5f7eb577be8e860cd7e15126a05d285}{getNumInputChannels}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ needs\ to\ be\ implemented\ based\ on\ the\ node's\ ports}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ now,\ return\ a\ default\ value\ -\/\ this\ should\ be\ overridden\ by\ specific\ implementations}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2;\ \textcolor{comment}{//\ Default\ to\ stereo}}
\DoxyCodeLine{00056\ \ \ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{int}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a2e3a9d06433fc35e14071301544125df}{getNumOutputChannels}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ needs\ to\ be\ implemented\ based\ on\ the\ node's\ ports}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ now,\ return\ a\ default\ value\ -\/\ this\ should\ be\ overridden\ by\ specific\ implementations}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2;\ \textcolor{comment}{//\ Default\ to\ stereo}}
\DoxyCodeLine{00062\ \ \ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ wrapped\ FluxNode}}
\DoxyCodeLine{00065\ \ \ \ \ std::shared\_ptr<FluxNode>\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_afd958da23f8ba0df72dd915402d2128d}{getFluxNode}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a5733b304d9589c0bf2a6a61b42775572}{m\_fluxNode}};\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00068\ \ \ \ \ std::shared\_ptr<FluxNode>\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_audio_processor_wrapper_a5733b304d9589c0bf2a6a61b42775572}{m\_fluxNode}};}
\DoxyCodeLine{00069\ \};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \}\ \textcolor{comment}{//\ namespace\ Beam}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ FLUX\_NODE\_AUDIO\_PROCESSOR\_WRAPPER\_HPP}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ }

\end{DoxyCode}
