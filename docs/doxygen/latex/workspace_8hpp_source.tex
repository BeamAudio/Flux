\doxysection{workspace.\+hpp}
\hypertarget{workspace_8hpp_source}{}\label{workspace_8hpp_source}\index{src/interface/workspace.hpp@{src/interface/workspace.hpp}}
\doxymbox{\hyperlink{workspace_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ WORKSPACE\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ WORKSPACE\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{component_8hpp}{component.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{tape__reel_8hpp}{tape\_reel.hpp}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{cable_8hpp}{cable.hpp}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{filter__module_8hpp}{filter\_module.hpp}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{dynamics__module_8hpp}{dynamics\_module.hpp}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__track__node_8hpp}{../engine/flux\_track\_node.hpp}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{analog__suite_8hpp}{../engine/analog\_suite.hpp}}"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__fx__nodes_8hpp}{../engine/flux\_fx\_nodes.hpp}}"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{audio__engine_8hpp}{../engine/audio\_engine.hpp}}"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__project_8hpp}{../session/flux\_project.hpp}}"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__audio__utils_8hpp}{../utilities/flux\_audio\_utils.hpp}}"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{namespace\ }\doxymbox{\hyperlink{namespace_beam}{Beam}}\ \{}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_workspace_a766ee9661dfc075f209a6529dc9bdded}{Workspace}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_component}{Component}}\ \{}
\DoxyCodeLine{00022\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00023\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a766ee9661dfc075f209a6529dc9bdded}{Workspace}}(std::shared\_ptr<FluxProject>\ project,\ \doxymbox{\hyperlink{class_beam_1_1_audio_engine}{AudioEngine}}*\ engine)\ }
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}(project),\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}(engine)\ \{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_component_a6865b1f22388af467bf6c789120fac05}{setBounds}}(0,\ 0,\ 10000,\ 10000);\ }
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}}\ =\ 1.0f;}
\DoxyCodeLine{00027\ \ \ \ \ \}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a8df46fd76c8d67b04cdf9c1240f5fed4}{update}}(\textcolor{keywordtype}{float}\ dt)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab0eae17cc8b4136ff7b5ca6a053cdd11}{syncReels}}();}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ module\ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}})\ \textcolor{keyword}{module}-\/>update(dt);}
\DoxyCodeLine{00032\ \ \ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3c1d392e1665833e35d0766f0f7d90ff}{render}}(\doxymbox{\hyperlink{class_beam_1_1_quad_batcher}{QuadBatcher}}\&\ batcher,\ \textcolor{keywordtype}{float}\ dt,\ \textcolor{keywordtype}{float}\ screenW,\ \textcolor{keywordtype}{float}\ screenH)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{class_beam_1_1_component_adc07913aed6ddadf1c730e7b3bb599cf}{m\_isVisible}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a9e0325c2bcab2008c8f38a24e480b1c5}{setViewTransform}}(\doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}},\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}},\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}});}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Background\ Grid\ (Virtual\ Space)}}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ spacing\ =\ 50.0f;}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{float}\ x\ =\ 0;\ x\ <\ 5000;\ x\ +=\ spacing)\ }
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_afeda7287047f1ee0db8203306f408503}{drawQuad}}(x,\ 0,\ 1,\ 5000,\ 0.2f,\ 0.2f,\ 0.2f,\ 0.5f);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{float}\ y\ =\ 0;\ y\ <\ 5000;\ y\ +=\ spacing)\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_afeda7287047f1ee0db8203306f408503}{drawQuad}}(0,\ y,\ 5000,\ 1,\ 0.2f,\ 0.2f,\ 0.2f,\ 0.5f);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ cable\ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}})\ \doxymbox{\hyperlink{class_beam_1_1_workspace_afc953d78f8e278dd38642da6d1019ea5}{renderCable}}(batcher,\ cable,\ dt,\ screenH);}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ module\ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}})\ \textcolor{keyword}{module}-\/>render(batcher,\ dt,\ screenW,\ screenH);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_ac958f72e3fc168a11fecba1f5a5a00b7}{resetViewTransform}}(screenW,\ screenH);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_aa0d7f1088677837479f81fb8a84af8a1}{m\_isDraggingCable}}\ \&\&\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a038f69a869c9cfaf59a882a960aa812f}{m\_activePort}})\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ mx,\ my;\ SDL\_GetMouseState(\&mx,\ \&my);}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Transform\ mouse\ to\ virtual\ space}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ vmx\ =\ (mx\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ vmy\ =\ (my\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_rect}{Rect}}\ pB\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a038f69a869c9cfaf59a882a960aa812f}{m\_activePort}}-\/>getBounds();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x1\ =\ pB.\doxymbox{\hyperlink{struct_beam_1_1_rect_a94d1d7f7501ecc84f202b7c4bfd61e08}{x}}\ +\ pB.\doxymbox{\hyperlink{struct_beam_1_1_rect_a69b99db01aa296ad7964be8fc0365a10}{w}}\ /\ 2;}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ y1\ =\ pB.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}}\ +\ pB.\doxymbox{\hyperlink{struct_beam_1_1_rect_a17a83604e8b45e52f9fdbcf4289f9851}{h}}\ /\ 2;}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cx\ =\ (x1\ +\ vmx)\ *\ 0.5f;}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cy\ =\ (y1\ +\ vmy)\ *\ 0.5f\ +\ std::abs(vmx\ -\/\ x1)\ *\ 0.2f\ +\ 20.0f;}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::pair<float,\ float>>\ curvePoints;}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <=\ 16;\ ++i)\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ t\ =\ (float)i\ /\ 16.0f;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ invT\ =\ 1.0f\ -\/\ t;}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ px\ =\ invT\ *\ invT\ *\ x1\ +\ 2.0f\ *\ invT\ *\ t\ *\ cx\ +\ t\ *\ t\ *\ vmx;}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ py\ =\ invT\ *\ invT\ *\ y1\ +\ 2.0f\ *\ invT\ *\ t\ *\ cy\ +\ t\ *\ t\ *\ vmy;}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ curvePoints.push\_back(\{px,\ py\});}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a9e0325c2bcab2008c8f38a24e480b1c5}{setViewTransform}}(\doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}},\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}},\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}});}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a296da7f546a2d405ec7e09b3cb1f725e}{drawCurve}}(curvePoints,\ 3.0f,\ 1.0f,\ 0.8f,\ 0.2f,\ 0.6f);}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_ac958f72e3fc168a11fecba1f5a5a00b7}{resetViewTransform}}(screenW,\ screenH);}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a8eb83f99ea59cb28f3b0c7431282feb3}{m\_isLoading}})\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a4b0b1f4124c2ca9ee300ff5724af42ba}{m\_loadingTimer}}\ +=\ dt;}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cx\ =\ screenW\ *\ 0.5f;}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cy\ =\ screenH\ *\ 0.5f;}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 4;\ ++i)\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ angle\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a4b0b1f4124c2ca9ee300ff5724af42ba}{m\_loadingTimer}}\ *\ 5.0f\ +\ (i\ *\ 1.57f);}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ rx\ =\ cx\ +\ std::cos(angle)\ *\ 30.0f;}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ ry\ =\ cy\ +\ std::sin(angle)\ *\ 30.0f;}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a16d867a50f08e83bc2b2242ea7c00acb}{drawRoundedRect}}(rx\ -\/\ 8,\ ry\ -\/\ 8,\ 16,\ 16,\ 8.0f,\ 0.5f,\ 0.2f,\ 0.6f,\ 1.0f,\ 1.0f);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a54b57a1fa94c48b9778c2fe1109e761a}{drawText}}(\textcolor{stringliteral}{"{}PROCESSING\ TAPE..."{}},\ cx\ -\/\ 60,\ cy\ +\ 60,\ 14,\ 1.0f,\ 1.0f,\ 1.0f,\ 1.0f);}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ \ \ \ \ \}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab0eae17cc8b4136ff7b5ca6a053cdd11}{syncReels}}()\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ tracks\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getTracks();}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Sync\ Tracks}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ track\ :\ tracks)\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ exists\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ mod\ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}})\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ reel\ =\ std::dynamic\_pointer\_cast<TapeReel>(mod);}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (reel\ \&\&\ reel-\/>getNodeId()\ ==\ track.nodeId)\ \{\ exists\ =\ \textcolor{keyword}{true};\ \textcolor{keywordflow}{break};\ \}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!exists)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\ =\ (400.0f\ +\ (track.trackIndex\ *\ 50.0f)\ +\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ y\ =\ (100.0f\ +\ (track.trackIndex\ *\ 150.0f)\ +\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ reel\ =\ std::make\_shared<TapeReel>(track.node,\ track.nodeId,\ x,\ y);}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a0dc64977ce42fbaf2fb024eae7b4bc35}{setupModule}}(reel);}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Sync\ Input\ Node}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ nodes\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>getNodes();}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ [\textcolor{keywordtype}{id},\ node]\ :\ nodes)\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (node-\/>getName()\ ==\ \textcolor{stringliteral}{"{}Audio\ Input"{}}\ ||\ node-\/>getName()\ ==\ \textcolor{stringliteral}{"{}Master"{}})\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ exists\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ mod\ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}})\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ audioMod\ =\ std::dynamic\_pointer\_cast<AudioModule>(mod);}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (audioMod\ \&\&\ audioMod-\/>getNodeId()\ ==\ \textcolor{keywordtype}{id})\ \{\ exists\ =\ \textcolor{keyword}{true};\ \textcolor{keywordflow}{break};\ \}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!exists)\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\ =\ (node-\/>getName()\ ==\ \textcolor{stringliteral}{"{}Master"{}}\ ?\ 800.0f\ :\ 100.0f);}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ y\ =\ (node-\/>getName()\ ==\ \textcolor{stringliteral}{"{}Master"{}}\ ?\ 250.0f\ :\ 100.0f);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ mod\ =\ std::make\_shared<AudioModule>(node,\ \textcolor{keywordtype}{id},\ x,\ y);}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a0dc64977ce42fbaf2fb024eae7b4bc35}{setupModule}}(mod);}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00127\ \ \ \ \ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a0dc64977ce42fbaf2fb024eae7b4bc35}{setupModule}}(std::shared\_ptr<AudioModule>\ mod)\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ mod-\/>onDeleteRequested\ =\ [\textcolor{keyword}{this}](\doxymbox{\hyperlink{class_beam_1_1_audio_module}{AudioModule}}*\ m)\ \{\ \doxymbox{\hyperlink{class_beam_1_1_workspace_ad2ad4c41b2135165bf931717fb78ff1b}{removeModule}}(m);\ \};}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (mod-\/>getInputPort())\ mod-\/>getInputPort()-\/>onConnectStarted\ =\ [\textcolor{keyword}{this}](\doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ p)\ \{\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a45597a1c3ca82eb3848628fb36cdd461}{startCableDrag}}(p);\ \};}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (mod-\/>getOutputPort())\ mod-\/>getOutputPort()-\/>onConnectStarted\ =\ [\textcolor{keyword}{this}](\doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ p)\ \{\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a45597a1c3ca82eb3848628fb36cdd461}{startCableDrag}}(p);\ \};}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}}.push\_back(mod);}
\DoxyCodeLine{00134\ \ \ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_acca5d578980d2463c579161ab6e52b29}{addTrack}}(\textcolor{keyword}{const}\ std::string\&\ filePath,\ \textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y,\ \doxymbox{\hyperlink{class_beam_1_1_audio_engine}{AudioEngine}}\&\ engine)\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a8eb83f99ea59cb28f3b0c7431282feb3}{m\_isLoading}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a4b0b1f4124c2ca9ee300ff5724af42ba}{m\_loadingTimer}}\ =\ 0.0f;}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ std::string\ fileName\ =\ filePath;}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ lastSlash\ =\ filePath.find\_last\_of(\textcolor{stringliteral}{"{}/\(\backslash\)\(\backslash\)"{}});}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lastSlash\ !=\ std::string::npos)\ fileName\ =\ filePath.substr(lastSlash\ +\ 1);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ fluxTrack\ =\ std::make\_shared<FluxTrackNode>(fileName,\ 1024\ *\ 4);}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fluxTrack-\/>load(filePath))\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ nodeId\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>addNode(fluxTrack);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_track_data}{TrackData}}\ td;}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ td.\doxymbox{\hyperlink{struct_beam_1_1_track_data_a0fe815f1f9877e2a29a039dca1a65e75}{node}}\ =\ fluxTrack;}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ td.\doxymbox{\hyperlink{struct_beam_1_1_track_data_a1a2ccea5bb7f8839502f360ea58e03fb}{nodeId}}\ =\ nodeId;}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ td.\doxymbox{\hyperlink{struct_beam_1_1_track_data_a6b1694e4a50f04a1f044fe85ad4bd823}{trackIndex}}\ =\ (int)\doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getTracks().size();}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ totalFrames\ =\ fluxTrack-\/>getInternalNode()-\/>getTotalFrames();}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_region}{Region}}\ r\ =\ \{fileName,\ 0,\ totalFrames,\ 0,\ td.\doxymbox{\hyperlink{struct_beam_1_1_track_data_a6b1694e4a50f04a1f044fe85ad4bd823}{trackIndex}}\};}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ r.\doxymbox{\hyperlink{struct_beam_1_1_region_a632fe1c9b80b4f1a5e33b371a269086c}{channelPeaks}}\ =\ fluxTrack-\/>getPeakData(400);\ }
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ td.\doxymbox{\hyperlink{struct_beam_1_1_track_data_a1eef8d30fc0ac37d80bd581f566ff790}{regions}}.push\_back(r);}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>addTrack(td);}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab0eae17cc8b4136ff7b5ca6a053cdd11}{syncReels}}();\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a8eb83f99ea59cb28f3b0c7431282feb3}{m\_isLoading}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00162\ \ \ \ \ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02d36df76f94244013d15221d195f5a2}{addFX}}(\textcolor{keyword}{const}\ std::string\&\ \doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}},\ \textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y)\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ std::shared\_ptr<FluxNode>\ fxNode;}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ buf\ =\ 1024\ *\ 4;}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ sr\ =\ 44100.0f;}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ x\ =\ (x\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ y\ =\ (y\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Filter"{}})\ \{}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ std::make\_shared<FluxFilterNode>(buf,\ sr);}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id}\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>addNode(node);}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a0dc64977ce42fbaf2fb024eae7b4bc35}{setupModule}}(std::make\_shared<FilterModule>(node,\ \textcolor{keywordtype}{id},\ x,\ y));}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab0eae17cc8b4136ff7b5ca6a053cdd11}{syncReels}}();\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}})\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}-\/>updatePlan();}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Opto-\/2A"{}})\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ std::make\_shared<Opto2A>(buf,\ sr);}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id}\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>addNode(node);}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a0dc64977ce42fbaf2fb024eae7b4bc35}{setupModule}}(std::make\_shared<\doxymbox{\hyperlink{class_beam_1_1_dynamics_module}{DynamicsModule<Opto2A>}}>(node,\ \textcolor{keywordtype}{id},\ x,\ y));}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab0eae17cc8b4136ff7b5ca6a053cdd11}{syncReels}}();\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}})\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}-\/>updatePlan();}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}FET-\/76"{}})\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ std::make\_shared<FET76>(buf,\ sr);}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id}\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>addNode(node);}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a0dc64977ce42fbaf2fb024eae7b4bc35}{setupModule}}(std::make\_shared<\doxymbox{\hyperlink{class_beam_1_1_dynamics_module}{DynamicsModule<FET76>}}>(node,\ \textcolor{keywordtype}{id},\ x,\ y));}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab0eae17cc8b4136ff7b5ca6a053cdd11}{syncReels}}();\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}})\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}-\/>updatePlan();}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Tube\ Limiter"{}})\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ node\ =\ std::make\_shared<TubeLimiter>(buf,\ sr);}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id}\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>addNode(node);}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a0dc64977ce42fbaf2fb024eae7b4bc35}{setupModule}}(std::make\_shared<\doxymbox{\hyperlink{class_beam_1_1_dynamics_module}{DynamicsModule<TubeLimiter>}}>(node,\ \textcolor{keywordtype}{id},\ x,\ y));}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab0eae17cc8b4136ff7b5ca6a053cdd11}{syncReels}}();\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}})\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}-\/>updatePlan();}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Tube-\/P\ EQ"{}})\ fxNode\ =\ std::make\_shared<TubeP\_EQ>(buf,\ sr);}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Console-\/E"{}})\ fxNode\ =\ std::make\_shared<ConsoleE\_EQ>(buf,\ sr);}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Steel\ Plate"{}})\ fxNode\ =\ std::make\_shared<SteelPlate>(buf,\ sr);}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Echo-\/Plex"{}})\ fxNode\ =\ std::make\_shared<EchoPlex>(buf,\ sr);}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Gain"{}})\ fxNode\ =\ std::make\_shared<FluxGainNode>(buf);}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ \textcolor{stringliteral}{"{}Delay"{}})\ fxNode\ =\ std::make\_shared<FluxDelayNode>(buf,\ sr);}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (fxNode)\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id}\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>addNode(fxNode);}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ mod\ =\ std::make\_shared<AudioModule>(fxNode,\ \textcolor{keywordtype}{id},\ x,\ y);}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a0dc64977ce42fbaf2fb024eae7b4bc35}{setupModule}}(mod);}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab0eae17cc8b4136ff7b5ca6a053cdd11}{syncReels}}();}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}})\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}-\/>updatePlan();}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00216\ \ \ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_ad2ad4c41b2135165bf931717fb78ff1b}{removeModule}}(\doxymbox{\hyperlink{class_beam_1_1_audio_module}{AudioModule}}*\ mod)\ \{}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \textcolor{keywordtype}{id}\ =\ mod-\/>\doxymbox{\hyperlink{class_beam_1_1_audio_module_a7fc32b3bfadec2badbfd067d2f37da96}{getNodeId}}();}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>removeNode(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ tracks\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getTracks();}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\ it\ =\ tracks.begin();\ it\ !=\ tracks.end();\ ++it)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(it-\/>nodeId\ ==\ \textcolor{keywordtype}{id})\ \{\ tracks.erase(it);\ \textcolor{keywordflow}{break};\ \}}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}}.begin();\ it\ !=\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}}.end();\ )\ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it-\/>input-\/>getModule()\ ==\ mod\ ||\ it-\/>output-\/>getModule()\ ==\ mod)\ it\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}}.erase(it);}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ ++it;}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}}.begin();\ it\ !=\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}}.end();\ ++it)\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it-\/>get()\ ==\ mod)\ \{\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}}.erase(it);\ \textcolor{keywordflow}{break};\ \}}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}})\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}-\/>updatePlan();}
\DoxyCodeLine{00233\ \ \ \ \ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a45597a1c3ca82eb3848628fb36cdd461}{startCableDrag}}(\doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ p)\ \{\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}}.begin();\ it\ !=\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}}.end();\ ++it)\ \{}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (it-\/>input\ ==\ p\ ||\ it-\/>output\ ==\ p)\ \{}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>disconnect(it-\/>output-\/>getModule()-\/>getNodeId(),\ 0,\ it-\/>input-\/>getModule()-\/>getNodeId(),\ 0);}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}-\/>updatePlan();}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a038f69a869c9cfaf59a882a960aa812f}{m\_activePort}}\ =\ (it-\/>input\ ==\ p)\ ?\ it-\/>output\ :\ it-\/>input;}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}}.erase(it);}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_aa0d7f1088677837479f81fb8a84af8a1}{m\_isDraggingCable}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_aa0d7f1088677837479f81fb8a84af8a1}{m\_isDraggingCable}}\ =\ \textcolor{keyword}{true};\ }
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a038f69a869c9cfaf59a882a960aa812f}{m\_activePort}}\ =\ p;\ }
\DoxyCodeLine{00248\ \ \ \ \ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a4ac39a74b5b2b887a520ff7eb0fdec0c}{connectPorts}}(\doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ p1,\ \doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ p2)\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!p1\ ||\ !p2\ ||\ p1-\/>\doxymbox{\hyperlink{class_beam_1_1_port_a275b6f61ad0282299769b94e98c70e95}{getType}}()\ ==\ p2-\/>\doxymbox{\hyperlink{class_beam_1_1_port_a275b6f61ad0282299769b94e98c70e95}{getType}}()\ ||\ !\doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}})\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ out\ =\ (p1-\/>\doxymbox{\hyperlink{class_beam_1_1_port_a275b6f61ad0282299769b94e98c70e95}{getType}}()\ ==\ \doxymbox{\hyperlink{namespace_beam_ae4c392a66fa6e2b6c86c6d5356ffe846a29c2c02a361c9d7028472e5d92cd4a54}{PortType::Output}})\ ?\ p1\ :\ p2;}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ in\ =\ (p1-\/>\doxymbox{\hyperlink{class_beam_1_1_port_a275b6f61ad0282299769b94e98c70e95}{getType}}()\ ==\ \doxymbox{\hyperlink{namespace_beam_ae4c392a66fa6e2b6c86c6d5356ffe846a324118a6721dd6b8a9b9f4e327df2bf5}{PortType::Input}})\ ?\ p1\ :\ p2;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}}.push\_back(\{out,\ in\});}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}}-\/>getGraph()-\/>connect(out-\/>\doxymbox{\hyperlink{class_beam_1_1_port_a87fd9ed55dc0e7f34b47d7f094f427c8}{getModule}}()-\/>\doxymbox{\hyperlink{class_beam_1_1_audio_module_a7fc32b3bfadec2badbfd067d2f37da96}{getNodeId}}(),\ 0,\ in-\/>\doxymbox{\hyperlink{class_beam_1_1_port_a87fd9ed55dc0e7f34b47d7f094f427c8}{getModule}}()-\/>\doxymbox{\hyperlink{class_beam_1_1_audio_module_a7fc32b3bfadec2badbfd067d2f37da96}{getNodeId}}(),\ 0);}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}}-\/>updatePlan();}
\DoxyCodeLine{00257\ \ \ \ \ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2d287ac679c39e3bb74a6806c627c610}{onMouseDown}}(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y,\ \textcolor{keywordtype}{int}\ button)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{class_beam_1_1_component_adc07913aed6ddadf1c730e7b3bb599cf}{m\_isVisible}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ vmx\ =\ (x\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ vmy\ =\ (y\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ it\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}}.rbegin();\ it\ !=\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}}.rend();\ ++it)\ \{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((*it)-\/>getBounds().contains(vmx,\ vmy))\ \textcolor{keywordflow}{return}\ (*it)-\/>onMouseDown(vmx,\ vmy,\ button);}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (button\ ==\ 3)\ \{\ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab41c4919edcced005a0a399ee1e89796}{m\_isPanning}}\ =\ \textcolor{keyword}{true};\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a28711dedfa0ddea4f3286b1c8ca026c6}{m\_lastMouseX}}\ =\ x;\ \doxymbox{\hyperlink{class_beam_1_1_workspace_af5e49785a110e6bbf05c74f8ee859140}{m\_lastMouseY}}\ =\ y;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00270\ \ \ \ \ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aa04ebe3cc67dbd9675a6a6eca5506547}{onMouseUp}}(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y,\ \textcolor{keywordtype}{int}\ button)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_aa0d7f1088677837479f81fb8a84af8a1}{m\_isDraggingCable}})\ \{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ vmx\ =\ (x\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ vmy\ =\ (y\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ mod\ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}})\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ audioMod\ =\ std::dynamic\_pointer\_cast<AudioModule>(mod);}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (audioMod)\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ checkPort\ =\ [\&](std::shared\_ptr<Port>\ p)\ \{}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!p)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_rect}{Rect}}\ b\ =\ p-\/>getBounds();}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ padding\ =\ 15.0f\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};\ \textcolor{comment}{//\ Scale\ padding\ with\ zoom}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (vmx\ >=\ b.\doxymbox{\hyperlink{struct_beam_1_1_rect_a94d1d7f7501ecc84f202b7c4bfd61e08}{x}}\ -\/\ padding\ \&\&\ vmx\ <=\ b.x\ +\ b.w\ +\ padding\ \&\&\ vmy\ >=\ b.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}}\ -\/\ padding\ \&\&\ vmy\ <=\ b.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}}\ +\ b.\doxymbox{\hyperlink{struct_beam_1_1_rect_a17a83604e8b45e52f9fdbcf4289f9851}{h}}\ +\ padding);}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (checkPort(audioMod-\/>getInputPort()))\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a4ac39a74b5b2b887a520ff7eb0fdec0c}{connectPorts}}(\doxymbox{\hyperlink{class_beam_1_1_workspace_a038f69a869c9cfaf59a882a960aa812f}{m\_activePort}},\ audioMod-\/>getInputPort().get());}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (checkPort(audioMod-\/>getOutputPort()))\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a4ac39a74b5b2b887a520ff7eb0fdec0c}{connectPorts}}(\doxymbox{\hyperlink{class_beam_1_1_workspace_a038f69a869c9cfaf59a882a960aa812f}{m\_activePort}},\ audioMod-\/>getOutputPort().get());}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_aa0d7f1088677837479f81fb8a84af8a1}{m\_isDraggingCable}}\ =\ \textcolor{keyword}{false};\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a038f69a869c9cfaf59a882a960aa812f}{m\_activePort}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{class_beam_1_1_component_adc07913aed6ddadf1c730e7b3bb599cf}{m\_isVisible}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab41c4919edcced005a0a399ee1e89796}{m\_isPanning}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ mod\ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}})\ mod-\/>onMouseUp(x,\ y,\ button);}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00298\ \ \ \ \ \}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_ae030281b49f7c11a28517b4deaf69b99}{onMouseMove}}(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_aa0d7f1088677837479f81fb8a84af8a1}{m\_isDraggingCable}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ }
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{class_beam_1_1_component_adc07913aed6ddadf1c730e7b3bb599cf}{m\_isVisible}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ vmx\ =\ (x\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ vmy\ =\ (y\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_ab41c4919edcced005a0a399ee1e89796}{m\_isPanning}})\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}}\ +=\ (x\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a28711dedfa0ddea4f3286b1c8ca026c6}{m\_lastMouseX}});\ }
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}}\ +=\ (y\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_af5e49785a110e6bbf05c74f8ee859140}{m\_lastMouseY}});}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a28711dedfa0ddea4f3286b1c8ca026c6}{m\_lastMouseX}}\ =\ x;\ \doxymbox{\hyperlink{class_beam_1_1_workspace_af5e49785a110e6bbf05c74f8ee859140}{m\_lastMouseY}}\ =\ y;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ mod\ :\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}})\ \textcolor{keywordflow}{if}\ (mod-\/>onMouseMove(vmx,\ vmy))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00314\ \ \ \ \ \}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_acb8a803c90b36069fae65f6eea19bdc4}{onMouseWheel}}(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ y,\ \textcolor{keywordtype}{float}\ delta)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\doxymbox{\hyperlink{class_beam_1_1_component_adc07913aed6ddadf1c730e7b3bb599cf}{m\_isVisible}})\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ oldZoom\ =\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ factor\ =\ (delta\ >\ 0)\ ?\ 1.1f\ :\ 0.9f;}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}}\ *=\ factor;}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}}\ =\ (std::clamp)(\doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}},\ 0.1f,\ 5.0f);}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}}\ =\ x\ -\/\ (x\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}})\ *\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}}\ /\ oldZoom);}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}}\ =\ y\ -\/\ (y\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}})\ *\ (\doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}}\ /\ oldZoom);}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00325\ \ \ \ \ \}}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a021920fd8b910cadf5286ce92b75ac79}{setVisible}}(\textcolor{keywordtype}{bool}\ visible)\ \{\ \doxymbox{\hyperlink{class_beam_1_1_component_adc07913aed6ddadf1c730e7b3bb599cf}{m\_isVisible}}\ =\ visible;\ \}}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_afc953d78f8e278dd38642da6d1019ea5}{renderCable}}(\doxymbox{\hyperlink{class_beam_1_1_quad_batcher}{QuadBatcher}}\&\ batcher,\ \doxymbox{\hyperlink{struct_beam_1_1_cable}{Cable}}\&\ cable,\ \textcolor{keywordtype}{float}\ dt,\ \textcolor{keywordtype}{float}\ screenH)\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_rect}{Rect}}\ outPos\ =\ cable.\doxymbox{\hyperlink{struct_beam_1_1_cable_a053fa9bcaca869bbe55a6e969a5d191f}{output}}-\/>\doxymbox{\hyperlink{class_beam_1_1_component_a5746dbc69d5b0adb4cffbcf920936d00}{getBounds}}();}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_rect}{Rect}}\ inPos\ =\ cable.\doxymbox{\hyperlink{struct_beam_1_1_cable_a1d97b8c95a75addc1ec772f6328fdc43}{input}}-\/>\doxymbox{\hyperlink{class_beam_1_1_component_a5746dbc69d5b0adb4cffbcf920936d00}{getBounds}}();}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x1\ =\ outPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a94d1d7f7501ecc84f202b7c4bfd61e08}{x}}\ +\ outPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a69b99db01aa296ad7964be8fc0365a10}{w}}\ /\ 2;}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ y1\ =\ outPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}}\ +\ outPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a17a83604e8b45e52f9fdbcf4289f9851}{h}}\ /\ 2;}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x2\ =\ inPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a94d1d7f7501ecc84f202b7c4bfd61e08}{x}}\ +\ inPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a69b99db01aa296ad7964be8fc0365a10}{w}}\ /\ 2;}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ y2\ =\ inPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}}\ +\ inPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a17a83604e8b45e52f9fdbcf4289f9851}{h}}\ /\ 2;}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cx\ =\ (x1\ +\ x2)\ *\ 0.5f;}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cy\ =\ (y1\ +\ y2)\ *\ 0.5f\ +\ std::abs(x2\ -\/\ x1)\ *\ 0.2f\ +\ 20.0f\ *\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}};}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ std::vector<std::pair<float,\ float>>\ curvePoints;}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <=\ 24;\ ++i)\ \{}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ t\ =\ (float)i\ /\ 24.0f;}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ invT\ =\ 1.0f\ -\/\ t;}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ px\ =\ invT\ *\ invT\ *\ x1\ +\ 2.0f\ *\ invT\ *\ t\ *\ cx\ +\ t\ *\ t\ *\ x2;}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ py\ =\ invT\ *\ invT\ *\ y1\ +\ 2.0f\ *\ invT\ *\ t\ *\ cy\ +\ t\ *\ t\ *\ y2;}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ curvePoints.push\_back(\{px,\ py\});}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a296da7f546a2d405ec7e09b3cb1f725e}{drawCurve}}(curvePoints,\ 6.0f\ *\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}},\ 0.05f,\ 0.05f,\ 0.05f,\ 0.4f);}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a296da7f546a2d405ec7e09b3cb1f725e}{drawCurve}}(curvePoints,\ 3.0f\ *\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}},\ 0.25f,\ 0.55f,\ 1.0f,\ 1.0f);}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a296da7f546a2d405ec7e09b3cb1f725e}{drawCurve}}(curvePoints,\ 1.0f\ *\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}},\ 0.5f,\ 0.8f,\ 1.0f,\ 0.7f);}
\DoxyCodeLine{00350\ \ \ \ \ \}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ std::shared\_ptr<FluxProject>\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aaad17331a0dbbe3ce854b2bac8d97f2c}{m\_project}};}
\DoxyCodeLine{00353\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_audio_engine}{AudioEngine}}*\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3bedeb344b9994f6263a63d41f909395}{m\_engine}};}
\DoxyCodeLine{00354\ \ \ \ \ std::vector<std::shared\_ptr<AudioModule>>\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a1ee622404ebc70e18f17c108554c5e8a}{m\_modules}};}
\DoxyCodeLine{00355\ \ \ \ \ std::vector<Cable>\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a9f2831c5c89695ea1f4805d39c777415}{m\_cables}};}
\DoxyCodeLine{00356\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a3003006c89fd162e8649d664f1347edb}{m\_panX}}\ =\ 0,\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a2b0b9919abb15280141142e9bbf2ec70}{m\_panY}}\ =\ 0;}
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a02c1061e122a496d97df7b10b842a480}{m\_zoom}}\ =\ 1.0f;}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_ab41c4919edcced005a0a399ee1e89796}{m\_isPanning}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a28711dedfa0ddea4f3286b1c8ca026c6}{m\_lastMouseX}}\ =\ 0,\ \doxymbox{\hyperlink{class_beam_1_1_workspace_af5e49785a110e6bbf05c74f8ee859140}{m\_lastMouseY}}\ =\ 0;}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_aa0d7f1088677837479f81fb8a84af8a1}{m\_isDraggingCable}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00361\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a038f69a869c9cfaf59a882a960aa812f}{m\_activePort}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a8eb83f99ea59cb28f3b0c7431282feb3}{m\_isLoading}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_workspace_a4b0b1f4124c2ca9ee300ff5724af42ba}{m\_loadingTimer}}\ =\ 0.0f;}
\DoxyCodeLine{00364\ \};}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \}\ \textcolor{comment}{//\ namespace\ Beam}}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ WORKSPACE\_HPP}}

\end{DoxyCode}
