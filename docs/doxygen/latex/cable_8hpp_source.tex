\doxysection{cable.\+hpp}
\hypertarget{cable_8hpp_source}{}\label{cable_8hpp_source}\index{src/interface/cable.hpp@{src/interface/cable.hpp}}
\doxymbox{\hyperlink{cable_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ CABLE\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ CABLE\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{port_8hpp}{port.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\doxymbox{\hyperlink{namespace_beam}{Beam}}\ \{}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{struct\ }\doxymbox{\hyperlink{struct_beam_1_1_cable}{Cable}}\ \{}
\DoxyCodeLine{00011\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ \doxymbox{\hyperlink{struct_beam_1_1_cable_a053fa9bcaca869bbe55a6e969a5d191f}{output}};}
\DoxyCodeLine{00012\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_port}{Port}}*\ \doxymbox{\hyperlink{struct_beam_1_1_cable_a1d97b8c95a75addc1ec772f6328fdc43}{input}};}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{struct_beam_1_1_cable_a948b7835cf76e0b645849832897e4f28}{render}}(\doxymbox{\hyperlink{class_beam_1_1_quad_batcher}{QuadBatcher}}\&\ batcher,\ \textcolor{keywordtype}{float}\ dt,\ \textcolor{keywordtype}{float}\ screenW,\ \textcolor{keywordtype}{float}\ screenH)\ \{}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_rect}{Rect}}\ outPos\ =\ \doxymbox{\hyperlink{struct_beam_1_1_cable_a053fa9bcaca869bbe55a6e969a5d191f}{output}}-\/>getBounds();}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{struct_beam_1_1_rect}{Rect}}\ inPos\ =\ \doxymbox{\hyperlink{struct_beam_1_1_cable_a1d97b8c95a75addc1ec772f6328fdc43}{input}}-\/>getBounds();}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x1\ =\ outPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a94d1d7f7501ecc84f202b7c4bfd61e08}{x}}\ +\ outPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a69b99db01aa296ad7964be8fc0365a10}{w}}\ /\ 2;}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ y1\ =\ outPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}}\ +\ outPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a17a83604e8b45e52f9fdbcf4289f9851}{h}}\ /\ 2;}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x2\ =\ inPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a94d1d7f7501ecc84f202b7c4bfd61e08}{x}}\ +\ inPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a69b99db01aa296ad7964be8fc0365a10}{w}}\ /\ 2;}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ y2\ =\ inPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a396c73bfc44165cb8af22d271dbdfae6}{y}}\ +\ inPos.\doxymbox{\hyperlink{struct_beam_1_1_rect_a17a83604e8b45e52f9fdbcf4289f9851}{h}}\ /\ 2;}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ Quadratic\ Bezier\ for\ more\ "{}sagging"{}\ physical\ cable\ look}}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Control\ point\ is\ the\ midpoint\ shifted\ down}}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cx\ =\ (x1\ +\ x2)\ *\ 0.5f;}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cy\ =\ (y1\ +\ y2)\ *\ 0.5f\ +\ std::abs(x2\ -\/\ x1)\ *\ 0.2f\ +\ 20.0f;}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ std::vector<std::pair<float,\ float>>\ curvePoints;}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ segments\ =\ 24;}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <=\ segments;\ ++i)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ t\ =\ (float)i\ /\ segments;}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ invT\ =\ 1.0f\ -\/\ t;}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Bezier\ formula:\ P\ =\ (1-\/t)\string^2*P1\ +\ 2(1-\/t)t*C\ +\ t\string^2*P2}}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ px\ =\ invT\ *\ invT\ *\ x1\ +\ 2.0f\ *\ invT\ *\ t\ *\ cx\ +\ t\ *\ t\ *\ x2;}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ py\ =\ invT\ *\ invT\ *\ y1\ +\ 2.0f\ *\ invT\ *\ t\ *\ cy\ +\ t\ *\ t\ *\ y2;}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ curvePoints.push\_back(\{px,\ py\});}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Draw\ shadow/depth}}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a296da7f546a2d405ec7e09b3cb1f725e}{drawCurve}}(curvePoints,\ 6.0f,\ 0.05f,\ 0.05f,\ 0.05f,\ 0.4f);}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Draw\ cable\ core}}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a296da7f546a2d405ec7e09b3cb1f725e}{drawCurve}}(curvePoints,\ 3.0f,\ 0.25f,\ 0.55f,\ 1.0f,\ 1.0f);}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Draw\ highlights}}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ batcher.\doxymbox{\hyperlink{class_beam_1_1_quad_batcher_a296da7f546a2d405ec7e09b3cb1f725e}{drawCurve}}(curvePoints,\ 1.0f,\ 0.5f,\ 0.8f,\ 1.0f,\ 0.7f);}
\DoxyCodeLine{00046\ \ \ \ \ \}}
\DoxyCodeLine{00047\ \};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \}\ \textcolor{comment}{//\ namespace\ Beam}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ CABLE\_HPP}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ }

\end{DoxyCode}
