\doxysection{analog\+\_\+base.\+hpp}
\hypertarget{analog__base_8hpp_source}{}\label{analog__base_8hpp_source}\index{src/engine/analog\_base.hpp@{src/engine/analog\_base.hpp}}
\doxymbox{\hyperlink{analog__base_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ ANALOG\_BASE\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ ANALOG\_BASE\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <random>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }\doxymbox{\hyperlink{namespace_beam}{Beam}}\ \{}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_analog_base}{AnalogBase}}\ \{}
\DoxyCodeLine{00016\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_a8eed4bd2205e1ff9dd9ab036ea7cfe95}{saturateLangevin}}(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ drive)\ \{}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ input\ =\ x\ *\ drive;}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Approximation\ of\ Langevin\ L(x)\ =\ coth(x)\ -\/\ 1/x}}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ use\ a\ scaled\ tanh\ for\ better\ real-\/time\ performance\ and\ musicality}}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::tanh(input);\ }
\DoxyCodeLine{00026\ \ \ \ \ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_a2ee8b06f1d7ce4b8cc4e30b44685b959}{saturateTransformer}}(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ iron)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Cubic\ non-\/linearity\ for\ odd\ harmonics}}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x3\ =\ x\ *\ x\ *\ x;}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ x\ -\/\ (iron\ *\ 0.1f\ *\ x3);}
\DoxyCodeLine{00035\ \ \ \ \ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter}{OnePoleFilter}}\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_ad5c46d54019ff65ee1ec061abdb41dc5}{setCutoff}}(\textcolor{keywordtype}{float}\ freq,\ \textcolor{keywordtype}{float}\ sampleRate)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_a7dc0974e70a5268b4a35552d27ebbdc1}{m\_b1}}\ =\ std::exp(-\/2.0f\ *\ 3.14159265f\ *\ freq\ /\ sampleRate);}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_a3900a50b36b06885c1597c689ab1cdf7}{m\_a0}}\ =\ 1.0f\ -\/\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_a7dc0974e70a5268b4a35552d27ebbdc1}{m\_b1}};}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_ad578c445671aaab83a8b9373b6f8f331}{process}}(\textcolor{keywordtype}{float}\ x)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_aaf6d6623ac4884e68d496b3395ef6059}{m\_z1}}\ =\ x\ *\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_a3900a50b36b06885c1597c689ab1cdf7}{m\_a0}}\ +\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_aaf6d6623ac4884e68d496b3395ef6059}{m\_z1}}\ *\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_a7dc0974e70a5268b4a35552d27ebbdc1}{m\_b1}};}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_aaf6d6623ac4884e68d496b3395ef6059}{m\_z1}};}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_aed129437b0d6d53597daa4a79f29cb87}{reset}}()\ \{\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_aaf6d6623ac4884e68d496b3395ef6059}{m\_z1}}\ =\ 0.0f;\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_a3900a50b36b06885c1597c689ab1cdf7}{m\_a0}}\ =\ 1.0f,\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_a7dc0974e70a5268b4a35552d27ebbdc1}{m\_b1}}\ =\ 0.0f,\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter_aaf6d6623ac4884e68d496b3395ef6059}{m\_z1}}\ =\ 0.0f;}
\DoxyCodeLine{00057\ \ \ \ \ \};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a21a4ea7345e590bd5ec7ff859d4098e5}{WowFlutterGenerator}}\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a21a4ea7345e590bd5ec7ff859d4098e5}{WowFlutterGenerator}}(\textcolor{keywordtype}{float}\ sampleRate)\ :\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a70eea959271d10f748eba7cba326fb75}{m\_sampleRate}}(sampleRate)\ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_ad7381452afa60d0c5f2707fa7580c707}{m\_rng}}.seed(std::random\_device()());}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a4466d9a5a8b28e0710a2d1243b2d4cdd}{setIntensity}}(\textcolor{keywordtype}{float}\ wow,\ \textcolor{keywordtype}{float}\ flutter)\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a27e7ed8f25a051a95d6bbcf5e183706e}{m\_wowDepth}}\ =\ wow;}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a3261a050317fd9ff64b63f0070f3c739}{m\_flutterDepth}}\ =\ flutter;}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_ac2f900604d5757f79382940da5448765}{next}}()\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Wow\ (Slow\ LFO\ 0.5Hz)}}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a8a795c38bb2b81427fe4d7b29ffa054e}{m\_wowPhase}}\ +=\ 0.5f\ /\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a70eea959271d10f748eba7cba326fb75}{m\_sampleRate}};}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a8a795c38bb2b81427fe4d7b29ffa054e}{m\_wowPhase}}\ >\ 1.0f)\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a8a795c38bb2b81427fe4d7b29ffa054e}{m\_wowPhase}}\ -\/=\ 1.0f;}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ w\ =\ std::sin(\doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a8a795c38bb2b81427fe4d7b29ffa054e}{m\_wowPhase}}\ *\ 6.283185f)\ *\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a27e7ed8f25a051a95d6bbcf5e183706e}{m\_wowDepth}};}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Flutter\ (Faster\ stochastic\ noise)}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ std::uniform\_real\_distribution<float>\ dist(-\/1.0f,\ 1.0f);}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ noise\ =\ dist(\doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_ad7381452afa60d0c5f2707fa7580c707}{m\_rng}});}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_ab99ec737da74f383a2c1d3b65f24d85b}{m\_flutterLP}}.setCutoff(25.0f,\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a70eea959271d10f748eba7cba326fb75}{m\_sampleRate}});\ \textcolor{comment}{//\ Flutter\ is\ focused\ in\ 10-\/50Hz\ range}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ f\ =\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_ab99ec737da74f383a2c1d3b65f24d85b}{m\_flutterLP}}.process(noise)\ *\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a3261a050317fd9ff64b63f0070f3c739}{m\_flutterDepth}};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ w\ +\ f;}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a70eea959271d10f748eba7cba326fb75}{m\_sampleRate}};}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a27e7ed8f25a051a95d6bbcf5e183706e}{m\_wowDepth}}\ =\ 0.0f;}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a3261a050317fd9ff64b63f0070f3c739}{m\_flutterDepth}}\ =\ 0.0f;}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_a8a795c38bb2b81427fe4d7b29ffa054e}{m\_wowPhase}}\ =\ 0.0f;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_one_pole_filter}{OnePoleFilter}}\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_ab99ec737da74f383a2c1d3b65f24d85b}{m\_flutterLP}};}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ std::mt19937\ \doxymbox{\hyperlink{class_beam_1_1_analog_base_1_1_wow_flutter_generator_ad7381452afa60d0c5f2707fa7580c707}{m\_rng}};}
\DoxyCodeLine{00096\ \ \ \ \ \};}
\DoxyCodeLine{00097\ \};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \}\ \textcolor{comment}{//\ namespace\ Beam}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ ANALOG\_BASE\_HPP}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ }

\end{DoxyCode}
