\doxysection{flux\+\_\+fx\+\_\+nodes.\+hpp}
\hypertarget{flux__fx__nodes_8hpp_source}{}\label{flux__fx__nodes_8hpp_source}\index{src/dsp/flux\_fx\_nodes.hpp@{src/dsp/flux\_fx\_nodes.hpp}}
\doxymbox{\hyperlink{flux__fx__nodes_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ FLUX\_FX\_NODES\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ FLUX\_FX\_NODES\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__node_8hpp}{flux\_node.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{gain__node_8hpp}{gain\_node.hpp}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{biquad__filter__node_8hpp}{biquad\_filter\_node.hpp}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{delay__node_8hpp}{delay\_node.hpp}}"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{namespace\ }\doxymbox{\hyperlink{namespace_beam}{Beam}}\ \{}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a9141fd7342b8411b66bf1ddf62111df6}{FluxGainNode}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node}{FluxNode}}\ \{}
\DoxyCodeLine{00012\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00013\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a9141fd7342b8411b66bf1ddf62111df6}{FluxGainNode}}(\textcolor{keywordtype}{int}\ bufferSize)\ \{}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ gainParam\ =\ std::make\_shared<Parameter>(\textcolor{stringliteral}{"{}Gain"{}},\ 0.0f,\ 2.0f,\ 1.0f);}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ad53f3fcaa5737f46d88530f40dbfbe32}{addParameter}}(gainParam);}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a67388972db423ad08f7230c627654f6b}{m\_gain}}\ =\ std::make\_shared<GainNode>(1.0f);}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ae3bafc1c5a1aa545167256172b3d3688}{setupBuffers}}(1,\ 1,\ bufferSize,\ 2);}
\DoxyCodeLine{00018\ \ \ \ \ \}}
\DoxyCodeLine{00019\ \ \ \ \ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_adeb55f996d1f48c22b674d62c27f2b8e}{process}}(\textcolor{keywordtype}{int}\ frames)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ gainValue\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_a59a32442eec144010741b9f2086c516e}{getParameter}}(\textcolor{stringliteral}{"{}Gain"{}})-\/>getValue();}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a67388972db423ad08f7230c627654f6b}{m\_gain}}-\/>setGain(gainValue);}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ in\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ac90bd1a05b5bed3d68978f532386ed29}{getInputBuffer}}(0);}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ out\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_abf11cfd4f2346ee0cd46d4345f1ed7d4}{getOutputBuffer}}(0);}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ std::copy(in,\ in\ +\ frames\ *\ 2,\ out);}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a67388972db423ad08f7230c627654f6b}{m\_gain}}-\/>process(out,\ frames,\ 2);}
\DoxyCodeLine{00028\ \ \ \ \ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ std::string\ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a628da5d08479cdcfdbf4965f5b7339f2}{getName}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Gain"{}};\ \}}
\DoxyCodeLine{00031\ \ \ \ \ std::vector<Port>\ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a8233991523774e343143415f5d314ca4}{getInputPorts}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{\ \{\textcolor{stringliteral}{"{}In"{}},\ 2\}\ \};\ \}}
\DoxyCodeLine{00032\ \ \ \ \ std::vector<Port>\ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a8c69847df47b060cd8027c4e85f74a8f}{getOutputPorts}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{\ \{\textcolor{stringliteral}{"{}Out"{}},\ 2\}\ \};\ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00035\ \ \ \ \ std::shared\_ptr<GainNode>\ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a67388972db423ad08f7230c627654f6b}{m\_gain}};}
\DoxyCodeLine{00036\ \};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a34beb77d37412cbaddefb3de6efe6247}{FluxFilterNode}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node}{FluxNode}}\ \{}
\DoxyCodeLine{00039\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00040\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a34beb77d37412cbaddefb3de6efe6247}{FluxFilterNode}}(\textcolor{keywordtype}{int}\ bufferSize,\ \textcolor{keywordtype}{float}\ sampleRate)\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ cutoffParam\ =\ std::make\_shared<Parameter>(\textcolor{stringliteral}{"{}Cutoff"{}},\ 20.0f,\ 20000.0f,\ 1000.0f);}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ qParam\ =\ std::make\_shared<Parameter>(\textcolor{stringliteral}{"{}Resonance"{}},\ 0.1f,\ 10.0f,\ 0.707f);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ad53f3fcaa5737f46d88530f40dbfbe32}{addParameter}}(cutoffParam);}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ad53f3fcaa5737f46d88530f40dbfbe32}{addParameter}}(qParam);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_aa75609be1d12c53002edf8ed1cbf6b6a}{m\_filter}}\ =\ std::make\_shared<BiquadFilterNode>(\doxymbox{\hyperlink{namespace_beam_aa79c53bfd2295b09750b964fa2a326d6a835f2dc4fd545ddcd275198d9fbadf63}{FilterType::LowPass}},\ 1000.0f,\ 0.707f,\ sampleRate);}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ae3bafc1c5a1aa545167256172b3d3688}{setupBuffers}}(1,\ 1,\ bufferSize,\ 2);}
\DoxyCodeLine{00048\ \ \ \ \ \}}
\DoxyCodeLine{00049\ \ \ \ \ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_aa06a586b7ba994ed77ebfceff2570549}{process}}(\textcolor{keywordtype}{int}\ frames)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_aa75609be1d12c53002edf8ed1cbf6b6a}{m\_filter}}-\/>setCutoff(\doxymbox{\hyperlink{class_beam_1_1_flux_node_a59a32442eec144010741b9f2086c516e}{getParameter}}(\textcolor{stringliteral}{"{}Cutoff"{}})-\/>getValue());}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_aa75609be1d12c53002edf8ed1cbf6b6a}{m\_filter}}-\/>setQ(\doxymbox{\hyperlink{class_beam_1_1_flux_node_a59a32442eec144010741b9f2086c516e}{getParameter}}(\textcolor{stringliteral}{"{}Resonance"{}})-\/>getValue());}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ in\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ac90bd1a05b5bed3d68978f532386ed29}{getInputBuffer}}(0);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ out\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_abf11cfd4f2346ee0cd46d4345f1ed7d4}{getOutputBuffer}}(0);}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ std::copy(in,\ in\ +\ frames\ *\ 2,\ out);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_aa75609be1d12c53002edf8ed1cbf6b6a}{m\_filter}}-\/>process(out,\ frames,\ 2);}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ std::string\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_ac4c3036266fce8b459991ea133e04263}{getName}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Filter"{}};\ \}}
\DoxyCodeLine{00061\ \ \ \ \ std::vector<Port>\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a05a526abb52eb8a88f79c219f7155ea8}{getInputPorts}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{\ \{\textcolor{stringliteral}{"{}In"{}},\ 2\}\ \};\ \}}
\DoxyCodeLine{00062\ \ \ \ \ std::vector<Port>\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a5fbda5bb2db19d441a0272fa8831aebe}{getOutputPorts}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{\ \{\textcolor{stringliteral}{"{}Out"{}},\ 2\}\ \};\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00065\ \ \ \ \ std::shared\_ptr<BiquadFilterNode>\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_aa75609be1d12c53002edf8ed1cbf6b6a}{m\_filter}};}
\DoxyCodeLine{00066\ \};}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_ac25de6a616be31281a6303b24785125e}{FluxDelayNode}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node}{FluxNode}}\ \{}
\DoxyCodeLine{00069\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00070\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_ac25de6a616be31281a6303b24785125e}{FluxDelayNode}}(\textcolor{keywordtype}{int}\ bufferSize,\ \textcolor{keywordtype}{float}\ sampleRate)\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ timeParam\ =\ std::make\_shared<Parameter>(\textcolor{stringliteral}{"{}Time"{}},\ 0.0f,\ 2.0f,\ 0.5f);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ feedbackParam\ =\ std::make\_shared<Parameter>(\textcolor{stringliteral}{"{}Feedback"{}},\ 0.0f,\ 1.0f,\ 0.3f);}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ad53f3fcaa5737f46d88530f40dbfbe32}{addParameter}}(timeParam);}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ad53f3fcaa5737f46d88530f40dbfbe32}{addParameter}}(feedbackParam);}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_aba0f0712321df607e37fbcd4cb6c0387}{m\_delay}}\ =\ std::make\_shared<DelayNode>(2.0f,\ 0.3f,\ sampleRate);\ \textcolor{comment}{//\ Max\ 2s\ delay}}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ae3bafc1c5a1aa545167256172b3d3688}{setupBuffers}}(1,\ 1,\ bufferSize,\ 2);}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ \ \ \ \ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_a1ff56dfcb9d8d2780d855b5e545e2552}{process}}(\textcolor{keywordtype}{int}\ frames)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note:\ DelayNode's\ buffer\ size\ is\ fixed\ at\ creation\ in\ this\ simple\ implementation}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ we\ only\ update\ feedback\ here.\ Delay\ time\ would\ need\ a\ circular\ buffer\ resize.}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ this\ abstraction\ demo,\ we'll\ just\ update\ feedback.}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ m\_delay-\/>setFeedback(getParameter("{}Feedback"{})-\/>getValue());\ }}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ in\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ac90bd1a05b5bed3d68978f532386ed29}{getInputBuffer}}(0);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ out\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_abf11cfd4f2346ee0cd46d4345f1ed7d4}{getOutputBuffer}}(0);}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ std::copy(in,\ in\ +\ frames\ *\ 2,\ out);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_aba0f0712321df607e37fbcd4cb6c0387}{m\_delay}}-\/>process(out,\ frames,\ 2);}
\DoxyCodeLine{00090\ \ \ \ \ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ std::string\ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_a603094c5e37cdcca6213eb1f243520f7}{getName}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Delay"{}};\ \}}
\DoxyCodeLine{00093\ \ \ \ \ std::vector<Port>\ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_a2fe1caad4bba89af6aa8994d8bdd0130}{getInputPorts}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{\ \{\textcolor{stringliteral}{"{}In"{}},\ 2\}\ \};\ \}}
\DoxyCodeLine{00094\ \ \ \ \ std::vector<Port>\ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_aa50c030fa23cfd17e3bf82380e0aecf3}{getOutputPorts}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{\ \{\textcolor{stringliteral}{"{}Out"{}},\ 2\}\ \};\ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00097\ \ \ \ \ std::shared\_ptr<DelayNode>\ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_aba0f0712321df607e37fbcd4cb6c0387}{m\_delay}};}
\DoxyCodeLine{00098\ \};}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \}\ \textcolor{comment}{//\ namespace\ Beam}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ FLUX\_FX\_NODES\_HPP}}

\end{DoxyCode}
