\doxysection{flux\+\_\+fx\+\_\+nodes.\+hpp}
\hypertarget{flux__fx__nodes_8hpp_source}{}\label{flux__fx__nodes_8hpp_source}\index{src/engine/flux\_fx\_nodes.hpp@{src/engine/flux\_fx\_nodes.hpp}}
\doxymbox{\hyperlink{flux__fx__nodes_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ FLUX\_FX\_NODES\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ FLUX\_FX\_NODES\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__plugin_8hpp}{flux\_plugin.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{biquad__filter__node_8hpp}{biquad\_filter\_node.hpp}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{delay__node_8hpp}{delay\_node.hpp}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\doxymbox{\hyperlink{namespace_beam}{Beam}}\ \{}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{comment}{//\ -\/-\/-\/\ Standard\ Gain\ Plugin\ -\/-\/-\/}}
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a9141fd7342b8411b66bf1ddf62111df6}{FluxGainNode}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a9d91b56960799fdbfc4575e2fcfa6689}{FluxPlugin}}\ \{}
\DoxyCodeLine{00012\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00013\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_a9141fd7342b8411b66bf1ddf62111df6}{FluxGainNode}}(\textcolor{keywordtype}{int}\ bufferSize)\ :\ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a9d91b56960799fdbfc4575e2fcfa6689}{FluxPlugin}}(\textcolor{stringliteral}{"{}Gain"{}},\ bufferSize,\ 44100.0f)\ \{}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a1768cc84018f8de19bcbf781e9b7ac3f}{addParam}}(\textcolor{stringliteral}{"{}Gain"{}},\ 0.0f,\ 2.0f,\ 1.0f);}
\DoxyCodeLine{00015\ \ \ \ \ \}}
\DoxyCodeLine{00016\ \ \ \ \ }
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_gain_node_af9e67f1fc2cfc0772405be5d8b820776}{processBlock}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ input,\ \textcolor{keywordtype}{float}*\ output,\ \textcolor{keywordtype}{int}\ totalSamples)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ gain\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a1b292b033caaaf9ec67154dfee2e577b}{getParam}}(\textcolor{stringliteral}{"{}Gain"{}});}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ totalSamples;\ ++i)\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \ \ \ \ output[i]\ =\ input[i]\ *\ gain;}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00022\ \ \ \ \ \}}
\DoxyCodeLine{00023\ \};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{comment}{//\ -\/-\/-\/\ Standard\ Filter\ Plugin\ -\/-\/-\/}}
\DoxyCodeLine{00026\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a34beb77d37412cbaddefb3de6efe6247}{FluxFilterNode}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a9d91b56960799fdbfc4575e2fcfa6689}{FluxPlugin}}\ \{}
\DoxyCodeLine{00027\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00028\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a34beb77d37412cbaddefb3de6efe6247}{FluxFilterNode}}(\textcolor{keywordtype}{int}\ bufferSize,\ \textcolor{keywordtype}{float}\ sampleRate)\ }
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ :\ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a9d91b56960799fdbfc4575e2fcfa6689}{FluxPlugin}}(\textcolor{stringliteral}{"{}Filter"{}},\ bufferSize,\ sampleRate)\ }
\DoxyCodeLine{00030\ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a1768cc84018f8de19bcbf781e9b7ac3f}{addParam}}(\textcolor{stringliteral}{"{}Cutoff"{}},\ 20.0f,\ 20000.0f,\ 1000.0f);}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a1768cc84018f8de19bcbf781e9b7ac3f}{addParam}}(\textcolor{stringliteral}{"{}Reso"{}},\ 0.1f,\ 10.0f,\ 0.707f);}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a02a9786e99536dc27895d4db7b14cde0}{m\_filter}}\ =\ std::make\_unique<BiquadFilterNode>(\doxymbox{\hyperlink{namespace_beam_aa79c53bfd2295b09750b964fa2a326d6a835f2dc4fd545ddcd275198d9fbadf63}{FilterType::LowPass}},\ 1000.0f,\ 0.707f,\ sampleRate);}
\DoxyCodeLine{00034\ \ \ \ \ \}}
\DoxyCodeLine{00035\ \ \ \ \ }
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a075b9fc4a15a1b51c5d948bd6ac27432}{processBlock}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ input,\ \textcolor{keywordtype}{float}*\ output,\ \textcolor{keywordtype}{int}\ totalSamples)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a02a9786e99536dc27895d4db7b14cde0}{m\_filter}}-\/>setCutoff(\doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a1b292b033caaaf9ec67154dfee2e577b}{getParam}}(\textcolor{stringliteral}{"{}Cutoff"{}}));}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a02a9786e99536dc27895d4db7b14cde0}{m\_filter}}-\/>setQ(\doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a1b292b033caaaf9ec67154dfee2e577b}{getParam}}(\textcolor{stringliteral}{"{}Reso"{}}));}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ adapt\ the\ BiquadNode\ which\ processes\ in\ place\ or\ via\ buffer}}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ simplicity\ in\ this\ refactor,\ we'll\ assume\ it\ handles\ the\ block}}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Actually,\ BiquadFilterNode::process\ takes\ a\ single\ buffer.}}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Let's\ optimize:\ copy\ input\ to\ output,\ then\ process\ in-\/place.}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ std::copy(input,\ input\ +\ totalSamples,\ output);}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a02a9786e99536dc27895d4db7b14cde0}{m\_filter}}-\/>process(output,\ totalSamples\ /\ 2,\ 2);\ \textcolor{comment}{//\ Frames,\ Channels}}
\DoxyCodeLine{00046\ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_biquad_filter_node}{BiquadFilterNode}}*\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_ac23c57a41ba741deb091f361ee97576e}{getInternalFilter}}()\ \{\ \textcolor{keywordflow}{return}\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a02a9786e99536dc27895d4db7b14cde0}{m\_filter}}.get();\ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00051\ \ \ \ \ std::unique\_ptr<BiquadFilterNode>\ \doxymbox{\hyperlink{class_beam_1_1_flux_filter_node_a02a9786e99536dc27895d4db7b14cde0}{m\_filter}};}
\DoxyCodeLine{00052\ \};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{comment}{//\ -\/-\/-\/\ Standard\ Delay\ Plugin\ -\/-\/-\/}}
\DoxyCodeLine{00055\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_ac25de6a616be31281a6303b24785125e}{FluxDelayNode}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a9d91b56960799fdbfc4575e2fcfa6689}{FluxPlugin}}\ \{}
\DoxyCodeLine{00056\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00057\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_ac25de6a616be31281a6303b24785125e}{FluxDelayNode}}(\textcolor{keywordtype}{int}\ bufferSize,\ \textcolor{keywordtype}{float}\ sampleRate)\ }
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ :\ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a9d91b56960799fdbfc4575e2fcfa6689}{FluxPlugin}}(\textcolor{stringliteral}{"{}Delay"{}},\ bufferSize,\ sampleRate)\ }
\DoxyCodeLine{00059\ \ \ \ \ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a1768cc84018f8de19bcbf781e9b7ac3f}{addParam}}(\textcolor{stringliteral}{"{}Time"{}},\ 0.0f,\ 2.0f,\ 0.5f);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_plugin_a1768cc84018f8de19bcbf781e9b7ac3f}{addParam}}(\textcolor{stringliteral}{"{}Feedback"{}},\ 0.0f,\ 0.95f,\ 0.3f);}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_ab2191ff5a0ab1a37cbc3e5d1e73a9a9c}{m\_delay}}\ =\ std::make\_unique<DelayNode>(2.0f,\ 0.3f,\ sampleRate);}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_a1edabd22ff7b188d62d46aac298fd2d0}{processBlock}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*\ input,\ \textcolor{keywordtype}{float}*\ output,\ \textcolor{keywordtype}{int}\ totalSamples)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ feedback\ from\ param.\ Time\ resizing\ is\ complex,\ skipping\ for\ now.}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ m\_delay-\/>setFeedback(getParam("{}Feedback"{}));\ }}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ std::copy(input,\ input\ +\ totalSamples,\ output);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_ab2191ff5a0ab1a37cbc3e5d1e73a9a9c}{m\_delay}}-\/>process(output,\ totalSamples\ /\ 2,\ 2);}
\DoxyCodeLine{00071\ \ \ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00074\ \ \ \ \ std::unique\_ptr<DelayNode>\ \doxymbox{\hyperlink{class_beam_1_1_flux_delay_node_ab2191ff5a0ab1a37cbc3e5d1e73a9a9c}{m\_delay}};}
\DoxyCodeLine{00075\ \};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \}\ \textcolor{comment}{//\ namespace\ Beam}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ FLUX\_FX\_NODES\_HPP}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ }

\end{DoxyCode}
