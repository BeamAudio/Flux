\doxysection{sine\+\_\+synth\+\_\+node.\+hpp}
\hypertarget{sine__synth__node_8hpp_source}{}\label{sine__synth__node_8hpp_source}\index{src/engine/sine\_synth\_node.hpp@{src/engine/sine\_synth\_node.hpp}}
\doxymbox{\hyperlink{sine__synth__node_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ SINE\_SYNTH\_NODE\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ SINE\_SYNTH\_NODE\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\doxymbox{\hyperlink{flux__node_8hpp}{flux\_node.hpp}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\doxymbox{\hyperlink{namespace_beam}{Beam}}\ \{}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{class\ }\doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a46897a3b738719199b26351203ae9d22}{SineSynthNode}}\ :\ \textcolor{keyword}{public}\ \doxymbox{\hyperlink{class_beam_1_1_flux_node}{FluxNode}}\ \{}
\DoxyCodeLine{00015\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00016\ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a46897a3b738719199b26351203ae9d22}{SineSynthNode}}(\textcolor{keywordtype}{int}\ bufferSize,\ \textcolor{keywordtype}{float}\ sampleRate)\ }
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ :\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a0dcc51f18341e2293a20dfe16557df43}{m\_sampleRate}}(sampleRate),\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_ace44a74c34e39fff03b1d0ba1733550b}{m\_phase}}(0.0f),\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a9b584e682c6ff2268bb38a29840a0189}{m\_active}}(false)\ \{}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_flux_node_ae3bafc1c5a1aa545167256172b3d3688}{setupBuffers}}(0,\ 1,\ bufferSize,\ 2);}
\DoxyCodeLine{00019\ \ \ \ \ \}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a3440774582a70b64fa5cd67cec5ffceb}{processMIDI}}(\textcolor{keyword}{const}\ \doxymbox{\hyperlink{class_beam_1_1_m_i_d_i_buffer}{MIDIBuffer}}\&\ midi)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ event\ :\ midi.\doxymbox{\hyperlink{class_beam_1_1_m_i_d_i_buffer_a14bc0875f35969aa61f0093ffcf320e5}{getEvents}}())\ \{}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t\ \doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ =\ \textcolor{keyword}{event}.status\ \&\ 0xF0;}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ 0x90\ \&\&\ event.data2\ >\ 0)\ \{\ \textcolor{comment}{//\ Note\ On}}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a4abc2fc473844135c565eb64590d8463}{m\_frequency}}\ =\ 440.0f\ *\ std::pow(2.0f,\ (\textcolor{keywordtype}{float})(event.data1\ -\/\ 69)\ /\ 12.0f);}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a9b584e682c6ff2268bb38a29840a0189}{m\_active}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note:\ Simplified\ monophonic,\ no\ envelope\ yet}}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ 0x80\ ||\ (\doxymbox{\hyperlink{texture_8cpp_ad9d356d2dd3763f53f907d0f196e48fa}{type}}\ ==\ 0x90\ \&\&\ event.data2\ ==\ 0))\ \{\ \textcolor{comment}{//\ Note\ Off}}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a9b584e682c6ff2268bb38a29840a0189}{m\_active}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00032\ \ \ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{void}\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_aa39837475aad06ad5ae86a8cddfd425f}{process}}(\textcolor{keywordtype}{int}\ frames)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ out\ =\ \doxymbox{\hyperlink{class_beam_1_1_flux_node_abf11cfd4f2346ee0cd46d4345f1ed7d4}{getOutputBuffer}}(0);}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ phaseIncr\ =\ (2.0f\ *\ 3.1415926535f\ *\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a4abc2fc473844135c565eb64590d8463}{m\_frequency}})\ /\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a0dcc51f18341e2293a20dfe16557df43}{m\_sampleRate}};}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ frames;\ ++i)\ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ val\ =\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a9b584e682c6ff2268bb38a29840a0189}{m\_active}}\ ?\ std::sin(\doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_ace44a74c34e39fff03b1d0ba1733550b}{m\_phase}})\ *\ 0.5f\ :\ 0.0f;}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ out[i\ *\ 2\ +\ 0]\ =\ val;\ \textcolor{comment}{//\ Left}}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ out[i\ *\ 2\ +\ 1]\ =\ val;\ \textcolor{comment}{//\ Right}}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_ace44a74c34e39fff03b1d0ba1733550b}{m\_phase}}\ +=\ phaseIncr;}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_ace44a74c34e39fff03b1d0ba1733550b}{m\_phase}}\ >\ 2.0f\ *\ 3.1415926535f)\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_ace44a74c34e39fff03b1d0ba1733550b}{m\_phase}}\ -\/=\ 2.0f\ *\ 3.1415926535f;}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00046\ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ std::string\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a745b626198ff61dc6196df3ff08b1de9}{getName}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}Sine\ Synth"{}};\ \}}
\DoxyCodeLine{00049\ \ \ \ \ }
\DoxyCodeLine{00050\ \ \ \ \ std::vector<Port>\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a5bdac8c5ac96a5413cc233af8918f29b}{getInputPorts}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \{\};\ \}}
\DoxyCodeLine{00051\ \ \ \ \ std::vector<Port>\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_ac3bde3e31ac67687fd6470b72a0d7b6f}{getOutputPorts}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\ \{\textcolor{stringliteral}{"{}Stereo\ Out"{}},\ 2\}\ \};}
\DoxyCodeLine{00053\ \ \ \ \ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a0dcc51f18341e2293a20dfe16557df43}{m\_sampleRate}};}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a4abc2fc473844135c565eb64590d8463}{m\_frequency}}\ =\ 440.0f;}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{float}\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_ace44a74c34e39fff03b1d0ba1733550b}{m\_phase}};}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{bool}\ \doxymbox{\hyperlink{class_beam_1_1_sine_synth_node_a9b584e682c6ff2268bb38a29840a0189}{m\_active}};}
\DoxyCodeLine{00060\ \};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \}\ \textcolor{comment}{//\ namespace\ Beam}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ SINE\_SYNTH\_NODE\_HPP}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ }

\end{DoxyCode}
